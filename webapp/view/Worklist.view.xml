<mvc:View
    controllerName="sap.fiori.freestyle.controller.Worklist"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:semantic="sap.f.semantic">

    <semantic:SemanticPage
        id="page"
        headerPinnable="false"
        toggleHeaderOnTitleClick="false">

        <semantic:titleHeading>
            <Title
                text="{i18n>worklistTitle}"
                level="H2"/>
        </semantic:titleHeading>

        <semantic:content>
            <VBox>
                <!-- Filter Toolbar -->
                <Toolbar id="filterToolbar">
                    <Title text="{i18n>filterCategory}" level="H5"/>
                    <ComboBox
                        id="categoryFilter"
                        placeholder="{i18n>filterAll}"
                        selectionChange=".onCategoryFilter"
                        width="200px">
                        <core:Item key="" text="{i18n>filterAll}"/>
                        <core:Item key="Dairy" text="Dairy"/>
                        <core:Item key="Beverages" text="Beverages"/>
                        <core:Item key="Grains" text="Grains"/>
                        <core:Item key="Proteins" text="Proteins"/>
                        <core:Item key="Produce" text="Produce"/>
                        <core:Item key="Snacks" text="Snacks"/>
                        <core:Item key="Condiments" text="Condiments"/>
                    </ComboBox>
                    <ToolbarSpacer/>
                    <Label text="{i18n>filterStock}"/>
                    <SegmentedButton
                        id="stockFilter"
                        selectionChange=".onStockFilter"
                        selectedKey="all">
                        <items>
                            <SegmentedButtonItem key="all" text="{i18n>stockAll}"/>
                            <SegmentedButtonItem key="inStock" text="{i18n>stockInStock}"/>
                            <SegmentedButtonItem key="lowStock" text="{i18n>stockLowStock}"/>
                            <SegmentedButtonItem key="outOfStock" text="{i18n>stockOutOfStock}"/>
                        </items>
                    </SegmentedButton>
                    <ToolbarSpacer/>
                    <CheckBox
                        id="availableFilter"
                        text="{i18n>filterAvailable}"
                        select=".onAvailableFilter"/>
                </Toolbar>

                <!-- Products Table -->
                <Table
                    id="table"
                    width="auto"
                    items="{
                        path: '/Products',
                        sorter: {
                            path: 'Name',
                            descending: false
                        }
                    }"
                    noDataText="{worklistView>/tableNoDataText}"
                    busyIndicatorDelay="{worklistView>/tableBusyDelay}"
                    growing="true"
                    growingScrollToLoad="true"
                    updateFinished=".onUpdateFinished">

                    <headerToolbar>
                        <OverflowToolbar>
                            <Title
                                id="tableHeader"
                                text="{worklistView>/worklistTableTitle}"
                                level="H3"/>
                            <ToolbarSpacer />
                            <Button
                                id="groupButton"
                                icon="sap-icon://group-2"
                                tooltip="{i18n>groupBy}"
                                press=".onGroup"/>
                            <SearchField
                                id="searchField"
                                tooltip="{i18n>worklistSearchTooltip}"
                                search=".onSearch"
                                width="auto">
                            </SearchField>
                            <Button
                                id="addButton"
                                icon="sap-icon://add"
                                tooltip="{i18n>create}"
                                press=".onAdd"/>
                        </OverflowToolbar>
                    </headerToolbar>

                    <columns>
                        <Column id="categoryColumn" width="3em">
                            <Text text="{i18n>columnCategory}" id="categoryColumnTitle"/>
                        </Column>
                        <Column id="nameColumn">
                            <Text text="{i18n>productName}" id="nameColumnTitle"/>
                        </Column>
                        <Column id="ratingColumn" hAlign="Center" width="8em">
                            <Text text="{i18n>columnRating}" id="ratingColumnTitle"/>
                        </Column>
                        <Column id="stockColumn" hAlign="End" width="10em">
                            <Text text="{i18n>columnStock}" id="stockColumnTitle"/>
                        </Column>
                        <Column id="priceColumn" hAlign="End" width="8em">
                            <Text text="{i18n>productPrice}" id="priceColumnTitle"/>
                        </Column>
                        <Column id="availableColumn" hAlign="Center" width="10em">
                            <Text text="{i18n>columnAvailable}" id="availableColumnTitle"/>
                        </Column>
                    </columns>

                    <items>
                        <ColumnListItem
                            type="Navigation"
                            press=".onPress">
                            <cells>
                                <core:Icon
                                    xmlns:core="sap.ui.core"
                                    src="{
                                        path: 'Category',
                                        formatter: '.formatter.categoryIcon'
                                    }"
                                    color="#007bff"
                                    size="1.5rem"/>
                                <ObjectIdentifier
                                    title="{Name}"
                                    text="{Description}"/>
                                <RatingIndicator
                                    value="{Rating}"
                                    maxValue="5"
                                    editable="false"
                                    iconSize="1rem"/>
                                <ObjectNumber
                                    number="{Stock}"
                                    unit="pcs"
                                    state="{
                                        path: 'Stock',
                                        formatter: '.formatter.stockState'
                                    }"/>
                                <ObjectNumber
                                    number="{
                                        path: 'Price',
                                        formatter: '.formatter.numberUnit'
                                    }"
                                    unit="EUR" />
                                <ObjectStatus
                                    text="{
                                        path: 'Available',
                                        formatter: '.formatter.availabilityText'
                                    }"
                                    state="{
                                        path: 'Available',
                                        formatter: '.formatter.availabilityState'
                                    }"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </semantic:content>

        <semantic:sendEmailAction>
            <semantic:SendEmailAction id="shareEmail" press=".onShareEmail"/>
        </semantic:sendEmailAction>

    </semantic:SemanticPage>

</mvc:View>
